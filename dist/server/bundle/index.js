module.exports=function(e){var t={};function n(a){if(t[a])return t[a].exports;var r=t[a]={i:a,l:!1,exports:{}};return e[a].call(r.exports,r,r.exports,n),r.l=!0,r.exports}return n.m=e,n.c=t,n.d=function(e,t,a){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(n.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)n.d(a,r,function(t){return e[t]}.bind(null,r));return a},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n.oe=function(e){process.nextTick(function(){throw e})},n(n.s=50)}([function(e,t){e.exports=require("react")},function(e,t,n){"use strict";var a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o=void 0;function i(e){new qq.maps.Geolocation("PMOBZ-DSBK6-7NQSZ-EUK5J-A4PR6-DEB4V","hnmall").getLocation(function(t){var n={latitude:t.lat,longitude:t.lng,accuracy:t.accuracy};e(n)},function(t){console.log(t),e()},{timeout:8e4})}function l(e,t){localStorage.setItem(e,t)}function c(e){return localStorage.getItem(e)}t.formatPrice=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2,n=("string"==typeof e?e:e.toString()).split(".");if(n[1]){for(var a=n[1],r="",o=0;o<t;o++)r+=a[o]?a[o]:"0";n[1]=r}else n[1]="00";return n[0]+"."+n[1]},t.isWechat=function(){var e=navigator.userAgent.toLowerCase();return/micromessenger/i.test(e)},t.navigatorGeolocation=function(e){"geolocation"in navigator?navigator.geolocation.getCurrentPosition(function(t){e({latitude:t.coords.latitude,longitude:t.coords.longitude,accuracy:t.coords.accuracy})},function(t){console.log(t),i(e)},{timeout:5e3,maximumAge:6e4}):i(e)},t.appendScript=function(e){var t=document.createElement("script"),n=document.getElementsByTagName("head")[0];t.type="text/javascript",t.src=e,n.appendChild(t)},t.getLocationByWeixin=function(e,t){void 0===("undefined"==typeof wx?"undefined":r(wx))&&t(),wx.config({debug:!1,appId:e.appId,timestamp:e.timestamp,nonceStr:e.nonceStr,signature:e.signature,jsApiList:["checkJsApi","openLocation","getLocation"]}),wx.ready(function(){wx.checkJsApi({jsApiList:["getLocation"],success:function(e){wx.getLocation({type:"wgs84",success:function(e){var n={latitude:e.latitude,longitude:e.longitude,speed:e.speed,accuracy:e.accuracy};t(n)},fail:function(){console.log("error***weixin"),i(t)}})},fail:function(){i(t)}})})},t.getScrollTop=function(){var e=0,t=0;return document.body&&(e=document.body.scrollTop),document.documentElement&&(t=document.documentElement.scrollTop),e-t>0?e:t},t.getScrollHeight=function(){var e=0,t=0;return document.body&&(e=document.body.scrollHeight),document.documentElement&&(t=document.documentElement.scrollHeight),e-t>0?e:t},t.localCache=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;if(!t){var a=c(e+"_time"),r=void 0;if(Date.now()-a>0)return!1;var o=c(e);try{r=JSON.parse(o)}catch(e){r=o}return r}l(e,"string"==typeof t?t:JSON.stringify(t)),l(e+"_time",Date.now()+1e3*n)},t.setCookie=function(e,t,n,a,r){var o=new Date,i=e+"="+escape(t);o.setDate(o.getDate()+n),n&&(i+=";expires="+o.toGMTString()),a&&(i+=";path="+a),r&&(i+=";domain="+r),console.log(i),document.cookie=i},t.distance=function(e,t,n,a){var r=function(e){return e*Math.PI/180};if(!(e&&t&&n&&a))return"";var o=r(e),i=r(n),l=o-i,c=r(t)-r(a),u=2*Math.asin(Math.sqrt(Math.pow(Math.sin(l/2),2)+Math.cos(o)*Math.cos(i)*Math.pow(Math.sin(c/2),2)));return(u*=6378137)>1e3?(u/=10,(u=parseInt(u))/100+"千米"):(u=Math.round(100*u)/100)+"米"},t.throttle=function(e,t){var n=void 0,a=void 0,r=void 0,o=Date.now();return function(){var i=Date.now(),l=t-(i-o);a=this,r=arguments,clearTimeout(n),l<=0?(e.apply(a,r),o=Date.now()):n=setTimeout(e,l)}},t.fetchApi=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=a({timeout:3e4,headers:{"Content-Type":"application/json"}},t),i=function(){return o(e,r).then(function(e){return e.data})};return o?i():Promise.resolve().then(n.t.bind(null,8,7)).then(function(e){return o=e.default,i()})},t.parseUrl=function(e){for(var t=window.location.search.replace("?","").split("&"),n="",a=0;a<t.length;a++){var r=t[a].split("=");if(r[0]===e){n=r[1];break}}return n},t.createNonceStr=function(){for(var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:32,t="ABCDEFGHJKMNPQRSTWXYZLOVUIabcdefhijkmnpolurstwxyz12345678",n=t.length,a="",r=0;r<e;r++)a+=t.charAt(Math.floor(Math.random()*n));return a},t.checkphone=function(e){return!!/^1(3|4|5|7|8)\d{9}$/.test(e)},t.isObject=function(e){return"[object Object]"==Object.prototype.toString.call(e)},t.isArray=function(e){return"[object Array]"==Object.prototype.toString.call(e)},t.wxShare=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments[1];void 0===("undefined"==typeof wx?"undefined":r(wx))&&t();var n=e.agentid,a=e.title,o=e.desc,i=e.imgUrl,l=e.link,c=e.type;console.log(n,"**"),wx.config({debug:!1,appId:e.appId,timestamp:e.timestamp,nonceStr:e.nonceStr,signature:e.signature,jsApiList:["onMenuShareTimeline","onMenuShareAppMessage","onMenuShareQQ","onMenuShareWeibo"]}),-1===l.indexOf("agent_id=")&&(l=-1!==l.indexOf("?")?l+"&agent_id="+n:l+"?agent_id="+n);var u={title:a,desc:o,link:l,imgUrl:i,success:function(){t&&t({type:c||"news",title:a,link:l,desc:o})}};wx.ready(function(){wx.onMenuShareTimeline(u),wx.onMenuShareAppMessage(u),wx.onMenuShareQQ(u),wx.onMenuShareWeibo(u)})},t.platform={isAndroid:function(){return!!navigator.userAgent.match(/Android/i)},isIOS:function(){return!!navigator.userAgent.match(/iPhone|iPad|iPod/i)},isWx:function(){return!!navigator.userAgent.match(/micromessenger/i)},isQQ:function(){return!!navigator.userAgent.match(/QQ/i)}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.BASE_HOST="https://wd.hnmall.com/",t.GPS_KEY="__geolocation__",t.TOKEN="__accessToken__",t.AGENTID="__agentid__",t.INSTALL_APP="install_hnmall_app",t.APPID="wxdbb96d20de9ed62a"},function(e,t){e.exports=require("classnames")},function(e,t){e.exports=require("redux")},function(e,t){e.exports=require("swiper")},function(e,t){e.exports=require("redux-thunk")},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},r=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}();t.wrapComponentWithActions=function(e,t){return function(n){function i(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(i.__proto__||Object.getPrototypeOf(i)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(i,n),r(i,[{key:"render",value:function(){return l.default.createElement(e,a({},this.props,(0,o.bindActionCreators)(t,this.props.dispatch)))}}]),i}(i.Component)};var o=n(4),i=n(0),l=u(i),c=u(n(6));function u(e){return e&&e.__esModule?e:{default:e}}var s=(0,o.compose)((0,o.applyMiddleware)(c.default))(o.createStore);t.default=s},function(e,t){e.exports=require("axios")},function(e,t){e.exports=require("react-redux")},,function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),r=n(0),o=(function(e){e&&e.__esModule}(r),n(1)),i=n(2);var l=function(e){function t(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,r.Component),a(t,[{key:"componentDidMount",value:function(){var e=this,t=(0,o.localCache)(i.AGENTID);(0,o.isWechat)()&&(t?this.setWeixinShare(t):setTimeout(function(){e.getUserInfo()},1e3))}},{key:"setWeixinShare",value:function(e){var t=this.props.info,n=t.title,a=t.desc,r=t.image,i=document.location.href;(0,o.fetchApi)("/index/weixin",{method:"POST",data:{url:encodeURIComponent(i)}}).then(function(t){(0,o.wxShare)({appId:t.appId,nonceStr:t.nonceStr,signature:t.signature,timestamp:t.timestamp,agentid:e,title:n,link:i,desc:a,imgUrl:r},function(e){(0,o.fetchApi)("/index/wxshare",{method:"POST",data:e})})})}},{key:"getUserInfo",value:function(){var e=this;if(!(0,o.isWechat)())return!1;var t=(0,o.parseUrl)("code");if(!t){var n=(0,o.createNonceStr)(16),a=encodeURIComponent(location.href),r=i.BASE_HOST+"weidian/get-code.html?appid="+i.APPID+"&state="+n+"&scope=snsapi_base&redirect_uri="+a;return location.href=r,!1}(0,o.fetchApi)("/index/token",{method:"POST",data:{code:t}}).then(function(t){if(t&&t.message){var n=t.message,a=n.accessToken,r=n.agent_id;(0,o.localCache)(i.TOKEN,a,604800),(0,o.localCache)(i.AGENTID,r,2592e3),e.setWeixinShare(r)}})}},{key:"render",value:function(){return""}}]),t}();t.default=l},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),r=n(0),o=c(r),i=c(n(3)),l=n(1);function c(e){return e&&e.__esModule?e:{default:e}}var u=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.handleClick=n.handleClick.bind(n),n.state={active:!1},n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,r.Component),a(t,[{key:"componentDidMount",value:function(){var e=this,t=Math.ceil(2*window.innerHeight);window.addEventListener("scroll",function(){var n=(0,l.getScrollTop)()>t;e.setState({active:n})})}},{key:"handleClick",value:function(){document.body.scrollTop=0,document.documentElement.scrollTop=0,this.setState({active:!1})}},{key:"render",value:function(){var e=this.state.active,t=(0,i.default)("app-go-top",{active:e});return o.default.createElement("div",{className:t,onClick:this.handleClick})}}]),t}();t.default=u},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),r=n(0),o=function(e){return e&&e.__esModule?e:{default:e}}(r),i=n(2);var l=function(e){function t(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,r.Component),a(t,[{key:"componentDidMount",value:function(){}},{key:"render",value:function(){return o.default.createElement("div",{className:"app-foot-bar"},o.default.createElement("a",{className:"foot-bar-item",href:"/"},o.default.createElement("img",{className:"icon",src:"https://www.hnmall.com/themes/mobilemall/images/d-icon1.png"}),o.default.createElement("span",null,"首页")),o.default.createElement("a",{className:"foot-bar-item",href:"/category.html"},o.default.createElement("img",{className:"icon",src:"https://www.hnmall.com/themes/mobilemall/images/d-icon2.png"}),o.default.createElement("span",null,"分类")),o.default.createElement("a",{className:"foot-bar-item",href:i.BASE_HOST+"wap/cart.html"},o.default.createElement("img",{className:"cart",src:"https://www.hnmall.com/themes/mobilemall/images/d-icon3.jpg"}),o.default.createElement("span",null,"购物车")),o.default.createElement("a",{className:"foot-bar-item",href:i.BASE_HOST+"weidian/store-index.html"},o.default.createElement("img",{className:"icon",src:"https://www.hnmall.com/themes/mobilemall/images/d-icon4.png"}),o.default.createElement("span",null,"店铺")),o.default.createElement("a",{className:"foot-bar-item",href:i.BASE_HOST+"wap/member.html"},o.default.createElement("img",{className:"icon",src:"https://www.hnmall.com/themes/mobilemall/images/d-icon5.png"}),o.default.createElement("span",null,"会员")))}}]),t}();t.default=l},function(e,t){e.exports=require("react-lazyload")},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),r=n(0),o=function(e){return e&&e.__esModule?e:{default:e}}(r),i=n(2);var l=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={value:""},n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,r.Component),a(t,[{key:"handleChange",value:function(e){var t=e.target.value;"666666"==t&&localStorage.clear(),this.setState({value:t})}},{key:"render",value:function(){var e=this,t=this.props.placeholder,n=this.state.value;return o.default.createElement("div",{className:"app-search-box"},o.default.createElement("form",{action:i.BASE_HOST+"wap/item-list.html?search_keywords="+n,method:"post",className:"search"},o.default.createElement("i",{className:"iconfont icon-zoom"}),o.default.createElement("input",{type:"text",name:"search_keywords",placeholder:t,value:this.state.value,onChange:function(t){e.handleChange(t)}})))}}]),t}();t.default=l},,,,function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.START_FETCH_LIST="START_FETCH_LIST",t.FINISH_FETCH_LIST="FINISH_FETCH_LIST",t.START_GET_STORE="START_GET_STORE",t.FINISH_GET_STORE="FINISH_GET_STORE",t.START_FETCH_MODULES="START_FETCH_MODULES",t.FINISH_FETCH_MODULES="FINISH_FETCH_MODULES",t.LOCAL_CACHE_MODULES="__index_modules__"},,,,,,,,,,,,,,,,,,function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.fetchGoods=function(e){return function(t){t(function(e){return{type:r.START_FETCH_LIST,param:e}}(e)),(0,a.fetchApi)("/index/goodslist",{method:"POST",data:{page:e.page,size:e.size,token:e.token}}).then(function(n){t(function(e,t){return{type:r.FINISH_FETCH_LIST,param:e,res:t}}(e,n))})}},t.getNearStore=function(e){return function(t){t(function(e){return{type:r.START_GET_STORE,param:e}}(e)),(0,a.fetchApi)("/index/shop",{method:"POST",data:{lat:e.latitude,lng:e.longitude}}).then(function(n){t(function(e,t){return{type:r.FINISH_GET_STORE,param:e,res:t}}(e,n))})}},t.fetchIndexModules=function(){return function(e){e({type:r.START_FETCH_MODULES});var t=(0,a.localCache)(r.LOCAL_CACHE_MODULES);t?e(o(t)):(0,a.fetchApi)("/index/modules",{method:"POST"}).then(function(t){(0,a.localCache)(r.LOCAL_CACHE_MODULES,t,3600),e(o(t))})}};var a=n(1),r=n(19);function o(e){return{type:r.FINISH_FETCH_MODULES,res:e}}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),r=n(0),o=function(e){return e&&e.__esModule?e:{default:e}}(r);var i=function(e){function t(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,r.Component),a(t,[{key:"render",value:function(){return o.default.createElement("div",{className:"copy-right"},o.default.createElement("a",{target:"_blank",href:"http://www.miibeian.gov.cn"},"湘ICP备14013772-3"),o.default.createElement("a",{target:"_blank",href:"https://www.hnmall.com/icp.html"},"增值电信业务经营许可证:湘B2-20140095"))}}]),t}();t.default=i},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),r=n(0),o=u(r),i=u(n(14)),l=n(1),c=n(2);function u(e){return e&&e.__esModule?e:{default:e}}var s=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={isReachButton:!1},n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,r.Component),a(t,[{key:"componentDidMount",value:function(){var e=this;this.token=(0,l.localCache)(c.TOKEN)||"";var t=window.innerHeight;window.addEventListener("scroll",(0,l.throttle)(function(n){var a=(0,l.getScrollTop)(),r=(0,l.getScrollHeight)();(a+t)/r>.4&&e.fetchGoodsList()},200),!1)}},{key:"fetchGoodsList",value:function(){var e=this.props.index,t=e.pageIndex,n=void 0===t?1:t,a=e.isFetching,r=e.isFetched,o=e.goodsList;return!a&&(!r&&(o.length>=200?(this.setState({isReachButton:!0}),!1):void this.props.fetchGoods({page:n,size:20,token:this.token})))}},{key:"renderList",value:function(){var e=this.props.index.goodsList;if(!(0,l.isArray)(e))return"";var t=o.default.createElement("img",{src:c.BASE_HOST+"res/images/cplogo.jpg"}),n=e.map(function(e,n){var a=(0,l.formatPrice)(e.price).split(".");return o.default.createElement("div",{className:"goods-list-item",key:e.item_id},o.default.createElement("a",{href:c.BASE_HOST+"wap/item-detail.html?item_id="+e.item_id},o.default.createElement("div",{className:"goods-img"},o.default.createElement(i.default,{once:!0,height:177,offsetVertical:200,placeholder:t},o.default.createElement("img",{src:e.image_default_id,className:"img"}))),o.default.createElement("div",{className:"goods-title mutiple-text"},e.title),o.default.createElement("div",{className:"goods-price"},o.default.createElement("span",{className:"sign"},"￥"),o.default.createElement("span",{className:"price"},a[0]),o.default.createElement("b",{className:"price-s"},".",a[1]),o.default.createElement("span",{className:"mkt-price"},(0,l.formatPrice)(e.mkt_price)),o.default.createElement("i",{className:"buy"},"马上抢"))))});return o.default.createElement("div",{className:"goods-list"},n)}},{key:"render",value:function(){var e=this.props.index.isFetching,t=this.state.isReachButton,n={display:e?"block":"none"},a={display:t?"block":"none"};return o.default.createElement("div",{className:"wrap"},o.default.createElement("div",{className:"goods-list-title"},"猜你喜欢"),this.renderList(),o.default.createElement("div",{className:"lazy-load-wrap",style:n},o.default.createElement("div",{className:"swiper-lazy-preloader"}),o.default.createElement("div",{className:"lazy-load-text"},"加载中...")),o.default.createElement("div",{style:a,className:"more-goods"},o.default.createElement("a",{href:"/category.html"},o.default.createElement("span",null,"没有找到想要的商品?换个方式"),o.default.createElement("i",{className:"iconfont icon-more"}))))}}]),t}();t.default=s},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),r=n(0),o=c(r),i=c(n(14)),l=n(2);function c(e){return e&&e.__esModule?e:{default:e}}var u=function(e){function t(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,r.Component),a(t,[{key:"gridStyleOne",value:function(e){return o.default.createElement("div",{className:"widget-grid flex"},o.default.createElement("a",{className:"widget grid-half",href:e[0].h5link},o.default.createElement(i.default,{once:!0,height:120},o.default.createElement("img",{src:e[0].image,className:"img"}))),o.default.createElement("a",{className:"widget grid-half",href:e[1].h5link},o.default.createElement(i.default,{once:!0,height:120},o.default.createElement("img",{src:e[1].image,className:"img"}))))}},{key:"gridStyleTwo",value:function(e){return o.default.createElement("div",{className:"widget-grid flex","data-type":"two"},o.default.createElement("div",{className:"widget grid-half"},o.default.createElement("a",{className:"widget b-b-l",href:e[0].h5link},o.default.createElement(i.default,{once:!0,height:121},o.default.createElement("img",{src:e[0].image,className:"img"}))),o.default.createElement("div",{className:"flex"},o.default.createElement("a",{className:"widget grid-half",href:e[1].h5link},o.default.createElement(i.default,{once:!0,height:121},o.default.createElement("img",{src:e[1].image,className:"img"}))),o.default.createElement("a",{className:"widget grid-half",href:e[2].h5link},o.default.createElement(i.default,{once:!0,height:121},o.default.createElement("img",{src:e[2].image,className:"img"}))))),o.default.createElement("a",{className:"widget grid-half",href:e[3].h5link},o.default.createElement(i.default,{once:!0,height:242},o.default.createElement("img",{src:e[3].image,className:"img"}))))}},{key:"gridStyleThree",value:function(e){return o.default.createElement("div",{className:"widget-grid flex","data-type":"three"},o.default.createElement("a",{className:"widget grid-half",href:e[0].h5link},o.default.createElement(i.default,{once:!0,height:242},o.default.createElement("img",{src:e[0].image,className:"img"}))),o.default.createElement("div",{className:"widget grid-half"},o.default.createElement("a",{className:"widget b-b-l",href:e[1].h5link},o.default.createElement(i.default,{once:!0,height:120},o.default.createElement("img",{src:e[1].image,className:"img"}))),o.default.createElement("div",{className:"flex"},o.default.createElement("a",{className:"widget grid-half",href:e[2].h5link},o.default.createElement(i.default,{once:!0,height:120},o.default.createElement("img",{src:e[2].image,className:"img"}))),o.default.createElement("a",{className:"widget grid-half",href:e[3].h5link},o.default.createElement(i.default,{once:!0,height:120},o.default.createElement("img",{src:e[3].image,className:"img"}))))))}},{key:"gridStyleFour",value:function(e){return o.default.createElement("div",{className:"widget-grid","data-type":"four"},o.default.createElement("div",{className:"flex"},o.default.createElement("a",{className:"widget grid-half",href:e[0].h5link},o.default.createElement(i.default,{once:!0,height:120},o.default.createElement("img",{src:e[0].image,className:"img"}))),o.default.createElement("a",{className:"widget grid-half",href:e[1].h5link},o.default.createElement(i.default,{once:!0,height:120},o.default.createElement("img",{src:e[1].image,className:"img"})))),o.default.createElement("div",{className:"flex"},o.default.createElement("a",{className:"widget grid-25",href:e[2].h5link},o.default.createElement(i.default,{once:!0,height:120},o.default.createElement("img",{src:e[2].image,className:"img"}))),o.default.createElement("a",{className:"widget grid-25",href:e[3].h5link},o.default.createElement(i.default,{once:!0,height:120},o.default.createElement("img",{src:e[3].image,className:"img"}))),o.default.createElement("a",{className:"widget grid-half",href:e[4].h5link},o.default.createElement(i.default,{once:!0,height:120},o.default.createElement("img",{src:e[4].image,className:"img"})))))}},{key:"gridStyleFive",value:function(e){return o.default.createElement("div",{className:"widget-grid","data-type":"five"},o.default.createElement("div",{className:"flex"},o.default.createElement("a",{className:"widget grid-half",href:e[0].h5link},o.default.createElement(i.default,{once:!0,height:120},o.default.createElement("img",{src:e[0].image,className:"img"}))),o.default.createElement("a",{className:"widget grid-half",href:e[1].h5link},o.default.createElement(i.default,{once:!0,height:120},o.default.createElement("img",{src:e[1].image,className:"img"})))),o.default.createElement("div",{className:"flex"},o.default.createElement("a",{className:"widget grid-25",href:e[2].h5link},o.default.createElement(i.default,{once:!0,height:120},o.default.createElement("img",{src:e[2].image,className:"img"}))),o.default.createElement("a",{className:"widget grid-25",href:e[3].h5link},o.default.createElement(i.default,{once:!0,height:120},o.default.createElement("img",{src:e[3].image,className:"img"}))),o.default.createElement("a",{className:"widget grid-25",href:e[4].h5link},o.default.createElement(i.default,{once:!0,height:120},o.default.createElement("img",{src:e[4].image,className:"img"}))),o.default.createElement("a",{className:"widget grid-25",href:e[5].h5link},o.default.createElement(i.default,{once:!0,height:120},o.default.createElement("img",{src:e[5].image,className:"img"})))))}},{key:"gridStyleSix",value:function(e){return o.default.createElement("div",{className:"widget-grid","data-type":"six"},o.default.createElement("div",{className:"flex"},o.default.createElement("a",{className:"widget grid-33",href:e[0].h5link},o.default.createElement(i.default,{once:!0,height:120},o.default.createElement("img",{src:e[0].image,className:"img"}))),o.default.createElement("a",{className:"widget grid-33",href:e[1].h5link},o.default.createElement(i.default,{once:!0,height:120},o.default.createElement("img",{src:e[1].image,className:"img"}))),o.default.createElement("a",{className:"widget grid-33",href:e[2].h5link},o.default.createElement(i.default,{once:!0,height:120},o.default.createElement("img",{src:e[2].image,className:"img"})))),o.default.createElement("div",{className:"flex"},o.default.createElement("a",{className:"widget grid-33",href:e[3].h5link},o.default.createElement(i.default,{once:!0,height:120},o.default.createElement("img",{src:e[3].image,className:"img"}))),o.default.createElement("a",{className:"widget grid-33",href:e[4].h5link},o.default.createElement(i.default,{once:!0,height:120},o.default.createElement("img",{src:e[4].image,className:"img"}))),o.default.createElement("a",{className:"widget grid-33",href:e[5].h5link},o.default.createElement(i.default,{once:!0,height:120},o.default.createElement("img",{src:e[5].image,className:"img"})))))}},{key:"renderGrid",value:function(){var e=this.props.params;if(Array.isArray(e.pic))switch(e.pic.forEach(function(e){e.image=e.image.replace(/^\//,l.BASE_HOST)}),e.styletag){case"one":return this.gridStyleOne(e.pic);case"two":return this.gridStyleTwo(e.pic);case"three":return this.gridStyleThree(e.pic);case"four":return this.gridStyleFour(e.pic);case"five":return this.gridStyleFive(e.pic);case"six":return this.gridStyleSix(e.pic);default:return""}}},{key:"render",value:function(){var e=this.props.params.title;return o.default.createElement("div",{className:"widget-grid"},o.default.createElement("div",{className:"widget-grid-title"},e),this.renderGrid())}}]),t}();t.default=u},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),r=n(0),o=u(r),i=n(1),l=u(n(14)),c=n(2);function u(e){return e&&e.__esModule?e:{default:e}}var s=function(e){function t(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,r.Component),a(t,[{key:"componentDidMount",value:function(){var e=this;Promise.resolve().then(n.t.bind(null,5,7)).then(function(t){new(0,t.default)(e.refs.store,{slidesPerView:4,preloadImages:!1})})}},{key:"storePublicGoods",value:function(){var e=this.props.index.shops,t=[];return!(0,i.isArray)(e)||e.length<1?"":(e.forEach(function(e){e.store.forEach(function(n,a){var r=n.image_default_id.replace(/^\//,c.BASE_HOST),u=(0,i.formatPrice)(n.price);t.push(o.default.createElement("div",{className:"swiper-slide store-goods-item",key:a},o.default.createElement("a",{href:c.BASE_HOST+"wap/prepare-item.html?shop_id="+e.shop_id+"&item_id="+n.item_id},o.default.createElement(l.default,{once:!0,height:80},o.default.createElement("img",{src:r,className:"img"})),o.default.createElement("span",{className:"price"},"￥"+u))))})}),t)}},{key:"nearStoreList",value:function(){var e=this.props.index,t=e.shops,n=e.coords,a=[];return!(0,i.isArray)(t)||t.length<1?"":(t.forEach(function(e,t){var r=(0,i.distance)(n.latitude,n.longitude,e.dimensions,e.longitude);a.push(o.default.createElement("div",{className:"flex shop-item",key:t},o.default.createElement("a",{className:"shop-img",href:c.BASE_HOST+"oto/shop-index.html?shop_id="+e.shop_id},o.default.createElement(l.default,{once:!0,height:88},o.default.createElement("img",{src:e.shop_logo,className:"img"}))),o.default.createElement("div",{className:"shop-info"},o.default.createElement("div",{className:"flex flex-around"},o.default.createElement("span",{className:"shop-name"},e.shop_name),o.default.createElement("i",{className:"distance"},"距离",r),o.default.createElement("a",{className:"shop-path",href:c.BASE_HOST+"oto/shop-index.html?shop_id="+e.shop_id},"去这里",o.default.createElement("i",{className:"iconfont icon-zuji"}))),o.default.createElement("div",{className:"coupon"},o.default.createElement("a",{href:c.BASE_HOST+"wap/s-coupon.html"},o.default.createElement("span",{className:"coupon-tag"},"领券"),"优惠券领取中心")))))}),a)}},{key:"renderShopIcon",value:function(e,t){for(var n=[],a=0;a<e.length;a++){var r=e[a];if("shop_icon"===r.widget){n=r.params.pic;break}}return n.map(function(e,n){return o.default.createElement("div",{className:"grid-half",key:"icon_"+n},o.default.createElement("a",{className:"widget",href:e.h5link+"?shop_id="+t},o.default.createElement(l.default,{once:!0,height:120},o.default.createElement("img",{src:e.image,className:"img"}))))})}},{key:"render",value:function(){var e=this.props.index,t=e.shops,n=e.modules,a=(0,i.isArray)(t)?t[0].shop_id:"";return o.default.createElement("div",{className:"near-store"},o.default.createElement("div",{className:"store-title"},o.default.createElement("span",null,"附近的微店"),o.default.createElement("a",{className:"store-link",href:c.BASE_HOST+"oto/shop-list.html"},o.default.createElement("span",null,"更多店铺"),o.default.createElement("i",{className:"iconfont icon-more"}))),o.default.createElement("div",{className:"store-list"},this.nearStoreList()),o.default.createElement("div",{className:"store-title"},o.default.createElement("span",null,"年度优惠套餐"),o.default.createElement("a",{className:"store-link",href:c.BASE_HOST+"wap/prepare-index.html?shop_id="+a},o.default.createElement("span",null,"更多"),o.default.createElement("i",{className:"iconfont icon-more"}))),o.default.createElement("div",{className:"line"}),o.default.createElement("div",{ref:"store",className:"store-goods swiper-container"},o.default.createElement("div",{className:"swiper-wrapper"},this.storePublicGoods())),o.default.createElement("div",{className:"flex"},this.renderShopIcon(n,a)))}}]),t}();t.default=s},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),r=n(0),o=function(e){return e&&e.__esModule?e:{default:e}}(r),i=n(1);var l=function(e){function t(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,r.Component),a(t,[{key:"componentDidMount",value:function(){var e=this;if(!this.refs.marquee)return!1;Promise.resolve().then(n.t.bind(null,5,7)).then(function(t){new(0,t.default)(e.refs.marquee,{direction:"vertical",loop:!0,autoplay:5e3})})}},{key:"render",value:function(){var e=this.props,t=e.more,n=e.message;if(!(0,i.isArray)(n))return"";var a=n.map(function(e,t){return o.default.createElement("div",{className:"swiper-slide",key:t},o.default.createElement("a",{className:"swiper-slide-row",href:e.link},e.linkinfo))});return o.default.createElement("div",{className:"swiper-message"},o.default.createElement("div",{className:"message-slogan"},"友阿",o.default.createElement("span",null,"快报")),o.default.createElement("div",{ref:"marquee",className:"swiper-container"},o.default.createElement("div",{className:"swiper-wrapper"},a)),o.default.createElement("div",{className:"message-core"},"| ",o.default.createElement("a",{href:t},"更多")))}}]),t}();t.default=l},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),r=n(0),o=function(e){return e&&e.__esModule?e:{default:e}}(r),i=n(1),l=n(2);var c=function(e){function t(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,r.Component),a(t,[{key:"render",value:function(){var e=this.props.icons;if(!(0,i.isArray)(e))return"";var t=e.map(function(e,t){return o.default.createElement("div",{className:"nav-menu-item",key:t},o.default.createElement("a",{href:e.h5link},o.default.createElement("img",{className:"nav-menu-icon",src:e.image.replace(/^\//,l.BASE_HOST),alt:e.tag}),o.default.createElement("span",{className:"nav-menu-text"},e.tag)))});return o.default.createElement("div",{className:"nav-menu"},t)}}]),t}();t.default=c},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),r=n(0),o=function(e){return e&&e.__esModule?e:{default:e}}(r),i=n(1),l=n(2);var c=function(e){function t(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,r.Component),a(t,[{key:"componentDidMount",value:function(){var e=this;if(!this.refs.slider)return!1;Promise.resolve().then(n.t.bind(null,5,7)).then(function(t){new(0,t.default)(e.refs.slider,{autoplay:5e3,lazyLoading:!0,pagination:".swiper-pagination"})})}},{key:"render",value:function(){var e=this.props.sliders;if(!(0,i.isArray)(e))return"";var t=e.map(function(e,t){var n=e.link.replace(/^\//,l.BASE_HOST);return o.default.createElement("div",{className:"swiper-slide banner",key:t},o.default.createElement("a",{href:e.linktarget},o.default.createElement("img",{className:"img swiper-lazy","data-src":n})),o.default.createElement("div",{className:"swiper-lazy-preloader"}))});return o.default.createElement("div",{ref:"slider",className:"swiper-container"},o.default.createElement("div",{className:"swiper-wrapper"},t),o.default.createElement("div",{className:"swiper-pagination"}))}}]),t}();t.default=c},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),r=n(0),o=u(r),i=u(n(15)),l=n(1),c=n(2);function u(e){return e&&e.__esModule?e:{default:e}}var s=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={isInsApp:!1,opacity:0},n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,r.Component),a(t,[{key:"componentDidMount",value:function(){var e=this,t=(0,l.localCache)(c.INSTALL_APP);this.setState({isInsApp:t}),window.addEventListener("scroll",(0,l.throttle)(function(n){var a=(0,l.getScrollTop)(),r=a>50,o=a/200,i=o>1?1:o.toFixed(1);if(e.state.opacity>=1&&r>200)return!1;e.setState({isInsApp:!!t||r,opacity:i})},100),!1)}},{key:"render",value:function(){var e=this.state,t=e.isInsApp,n=e.opacity,a=this.props.index.shops,r={top:t?"0":"50px",backgroundColor:"rgba(237,103,74,"+n+")"},u=(0,l.isArray)(a)?a[0].shop_name:"",s={display:t?"none":"block",height:"50px"};return o.default.createElement("div",{className:"shearch-box"},o.default.createElement("div",{style:r,className:"search-bar"},o.default.createElement("a",{href:c.BASE_HOST+"oto/shop-list.html",className:"shop-link"},o.default.createElement("i",{className:"icon-point"}),o.default.createElement("span",{className:"shop-name ellipsis"},u)),o.default.createElement(i.default,{placeholder:"附近的店铺、商品"}),o.default.createElement("div",{className:"iconfont icon-guangbo icon-cost"})),o.default.createElement("div",{style:s}))}}]),t}();t.default=s},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),r=n(0),o=u(r),i=u(n(3)),l=n(2),c=n(1);function u(e){return e&&e.__esModule?e:{default:e}}var s=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={active:!1},n.handleClick=n.handleClick.bind(n),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,r.Component),a(t,[{key:"componentDidMount",value:function(){var e=(0,c.localCache)(l.INSTALL_APP);this.setState({active:!e}),e||this.onViewScroll()}},{key:"launchApp",value:function(e){if(c.platform.isWx())return e&&e(),!1;var t=Date.now(),n=window.document,a=n.createElement("iframe"),r="",o="YouAWeishop://",i="YouAWeishop://";c.platform.isIOS()?r=o:c.platform.isAndroid()&&(r=i),a.src=r,a.style.display="none",document.body.appendChild(a),setTimeout(function(){Date.now()-t<150?e&&e(r):(0,c.localCache)(l.INSTALL_APP,"install",604800),n.body.removeChild(a)},100)}},{key:"onViewScroll",value:function(){var e=this;window.addEventListener("scroll",function(){var t=!((0,c.getScrollTop)()>50);e.setState({active:t})})}},{key:"handleClick",value:function(){location.href="https://www.hnmall.com/downloadPage/default.html"}},{key:"render",value:function(){var e=this.state.active,t=(0,i.default)("app-download-bar",{show:e});return o.default.createElement("div",{className:t,onClick:this.handleClick},o.default.createElement("div",{className:"flex bar"},o.default.createElement("div",{className:"logo"}),o.default.createElement("div",{className:"app-down"},o.default.createElement("div",{className:"app-name"},"友阿微店APP"),o.default.createElement("div",{className:"app-desc"},"002277友阿股份旗下新零售平台")),o.default.createElement("div",{className:"app-tip"},"立即打开")))}}]),t}();t.default=s},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Index=void 0;var a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},r=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),o=n(0),i=_(o),l=_(n(46)),c=_(n(45)),u=_(n(44)),s=_(n(43)),f=_(n(42)),d=_(n(41)),m=_(n(40)),p=_(n(13)),h=_(n(39)),g=_(n(38)),y=_(n(12)),v=_(n(11)),E=n(2),b=n(1);function _(e){return e&&e.__esModule?e:{default:e}}t.Index=function(e){function t(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,o.Component),r(t,[{key:"componentDidMount",value:function(){var e=this,t=(0,b.localCache)(E.GPS_KEY),n=(0,b.localCache)(E.TOKEN);this.props.fetchIndexModules(),t?this.props.getNearStore(t):this.getGeoLocation(function(t){e.props.getNearStore(t)}),n?this.checkToken(n):this.getUserInfo()}},{key:"checkToken",value:function(e){var t=this;(0,b.fetchApi)("/index/checktoken",{method:"POST",data:{token:e}}).then(function(e){0!==e.code&&t.getUserInfo()})}},{key:"getUserInfo",value:function(){if(!(0,b.isWechat)())return!1;var e=(0,b.parseUrl)("code");if(!e){var t=(0,b.createNonceStr)(16),n=encodeURIComponent(window.location.href),a=E.BASE_HOST+"weidian/get-code.html?appid="+E.APPID+"&state="+t+"&scope=snsapi_base&redirect_uri="+n;return location.href=a,!1}(0,b.fetchApi)("/index/token",{method:"POST",data:{code:e}}).then(function(e){if(e&&e.message){var t=e.message,n=t.accessToken,a=t.agent_id;(0,b.localCache)(E.TOKEN,n,604800),(0,b.localCache)(AGENTID,a,2592e3)}})}},{key:"getGeoLocation",value:function(e){var t={latitude:28.194104,longitude:113.013206};(0,b.isWechat)()?(0,b.fetchApi)("/index/weixin",{method:"POST",data:{url:encodeURIComponent(document.location.href)}}).then(function(n){var a=n.appId,r=n.nonceStr,o=n.signature,i=n.timestamp;(0,b.getLocationByWeixin)({appId:a,nonceStr:r,signature:o,timestamp:i},function(n){n&&(t=n,(0,b.localCache)(E.GPS_KEY,t,3600)),e(t)})}):(0,b.navigatorGeolocation)(function(n){n&&(t=n,(0,b.localCache)(E.GPS_KEY,t,3600)),e(t)})}},{key:"renderWidgets",value:function(){var e=this.props.index,t=e.modules,n=e.more_url,a=[];return t.forEach(function(e,t){switch(e.widget){case"slider":a.push(i.default.createElement(u.default,{sliders:e.params.pic,key:"slider_"+t}));break;case"icons_nav":a.push(i.default.createElement(s.default,{icons:e.params.pic,key:"nav_"+t}));break;case"ad_content":a.push(i.default.createElement(f.default,{message:e.params.ad_content,more:n,key:"ad_"+t}));break;case"floor":a.push(i.default.createElement(m.default,{params:e.params,key:"floor_"+t}))}}),a}},{key:"render",value:function(){var e=this.renderWidgets();return e.splice(3,0,i.default.createElement(d.default,a({},this.props,{key:"shop"}))),i.default.createElement("div",{className:"app-wrap"},i.default.createElement(l.default,null),i.default.createElement(c.default,this.props),e,i.default.createElement(h.default,this.props),i.default.createElement(p.default,null),i.default.createElement(g.default,null),i.default.createElement(y.default,null),i.default.createElement(v.default,{info:{title:"友阿微店--更高品质,便捷生活",desc:"友阿微店--更高品质,便捷生活",image:"https://www.hnmall.com/images/3a/e5/c5/076ec271495f7494427fad42f6c0d2443189019b.jpg"}}))}}]),t}()},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},r=n(4),o=n(1),i=n(19);function l(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}var c=(0,r.combineReducers)({index:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments[1];switch(t.type){case i.START_FETCH_MODULES:return a({},e,{isGetching:!0,isGetched:!1});case i.FINISH_FETCH_MODULES:var n=t.res.modules,r=n.modules,c=n.more_url;return a({},e,{isGetching:!1,isGetched:!0,modules:r,more_url:c});case i.START_FETCH_LIST:return a({},e,{isFetching:!0,isFetched:!1});case i.FINISH_FETCH_LIST:var u=t.res,s=t.param,f=function(e,t){return(0,o.isArray)(e)?(0,o.isArray)(t)?[].concat(l(e),l(t)):e:(0,o.isArray)(t)?t:[]}(e.goodsList,u.list),d=s.page+1,m=!(0,o.isArray)(u.list)||!u.list.length;return a({},e,{goodsList:f,pageIndex:d,isFetched:m,isFetching:!1});case i.START_GET_STORE:return a({},e,{isUpdating:!0,isUpdated:!1});case i.FINISH_GET_STORE:var p=t.res?t.res.message:null;return a({},e,{isUpdating:!1,isUpdated:!0,coords:t.param,shops:p});default:return e}}});t.default=c},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),r=n(0),o=d(r),i=n(9),l=d(n(48)),c=n(7),u=d(c),s=n(47),f=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(n(37));function d(e){return e&&e.__esModule?e:{default:e}}var m=(0,i.connect)(function(e){return e})((0,c.wrapComponentWithActions)(s.Index,f));var p=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,r.Component),a(t,[{key:"render",value:function(){var e=this.props.initialState,t=function(e){return(0,u.default)(l.default,e)}({index:{modules:e.modules,more_url:e.more_url,goodsList:[],pageIndex:1,isFetching:!1,isFetched:!1}});return o.default.createElement(i.Provider,{store:t},o.default.createElement(m,null))}}]),t}();t.default=p},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=o(n(0)),r=o(n(49));function o(e){return e&&e.__esModule?e:{default:e}}t.default=function(e){return new Promise(function(t,n){t({app:a.default.createElement(r.default,{initialState:e})})})}}]);